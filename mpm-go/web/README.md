# MPM Web - ç›¸å†Œç®¡ç†ç³»ç»Ÿå‰ç«¯

åŸºäº Vue 3 + TypeScript + TDesign + Vite æ„å»ºçš„ç°ä»£åŒ–ç›¸å†Œç®¡ç†ç³»ç»Ÿã€‚

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ–¼ï¸ **ç…§ç‰‡ç®¡ç†** - æµè§ˆã€æœç´¢ã€è¿‡æ»¤ã€æ”¶è—ç…§ç‰‡
- ğŸ“… **æ—¶é—´çº¿** - æŒ‰å¹´æœˆæ ‘å½¢å±•ç¤ºç…§ç‰‡
- ğŸ—ºï¸ **åœ°å›¾å±•ç¤º** - åŸºäº Leaflet çš„åœ°ç†ä½ç½®å±•ç¤º
- ğŸ‘¤ **äººè„¸è¯†åˆ«** - äººè„¸æ£€æµ‹ã€åˆ†ç»„ã€å‘½åç®¡ç†
- ğŸ¯ **æ´»åŠ¨ç®¡ç†** - åˆ›å»ºå’Œç®¡ç†ç…§ç‰‡æ´»åŠ¨
- ğŸ“ **æ–‡ä»¶å¤¹ç®¡ç†** - æ‰¹é‡æ“ä½œç…§ç‰‡
- â¬†ï¸ **ç…§ç‰‡ä¸Šä¼ ** - æ”¯æŒæ‰¹é‡ä¸Šä¼ å›¾ç‰‡å’Œè§†é¢‘
- ğŸ—‘ï¸ **å›æ”¶ç«™** - ç…§ç‰‡æ¢å¤å’Œæ°¸ä¹…åˆ é™¤

### æŠ€æœ¯ç‰¹æ€§
- âš¡ï¸ **å¿«é€Ÿå¼€å‘** - Vite çƒ­æ›´æ–°ï¼Œå¼€å‘ä½“éªŒæä½³
- ğŸ¨ **ç°ä»£UI** - TDesign ä¼ä¸šçº§ç»„ä»¶åº“
- ğŸ“± **å“åº”å¼** - é€‚é…å„ç§å±å¹•å°ºå¯¸
- ğŸ” **å®‰å…¨è®¤è¯** - åŸºäºç­¾åçš„èº«ä»½éªŒè¯
- ğŸš€ **æ€§èƒ½ä¼˜åŒ–** - æ‡’åŠ è½½ã€è™šæ‹Ÿæ»šåŠ¨ç­‰ä¼˜åŒ–

## æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Vue 3 (Composition API)
- **è¯­è¨€**: TypeScript
- **æ„å»ºå·¥å…·**: Vite
- **UI ç»„ä»¶åº“**: TDesign Vue Next
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router 4
- **HTTP å®¢æˆ·ç«¯**: Axios
- **åœ°å›¾**: Leaflet
- **æ—¥æœŸå¤„ç†**: Day.js

## é¡¹ç›®ç»“æ„

```
web/
â”œâ”€â”€ public/              # é™æ€èµ„æº
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/            # API æ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ assets/         # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ components/     # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ layout/         # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ router/         # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ stores/         # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ views/          # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Login.vue       # ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ Photos.vue      # ç…§ç‰‡æµè§ˆ
â”‚   â”‚   â”œâ”€â”€ Timeline.vue    # æ—¶é—´çº¿
â”‚   â”‚   â”œâ”€â”€ Map.vue         # åœ°å›¾
â”‚   â”‚   â”œâ”€â”€ Faces.vue       # äººè„¸ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ Activities.vue  # æ´»åŠ¨ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ Folders.vue     # æ–‡ä»¶å¤¹
â”‚   â”‚   â”œâ”€â”€ Upload.vue      # ä¸Šä¼ 
â”‚   â”‚   â””â”€â”€ Trash.vue       # å›æ”¶ç«™
â”‚   â”œâ”€â”€ App.vue         # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts         # å…¥å£æ–‡ä»¶
â”œâ”€â”€ index.html          # HTML æ¨¡æ¿
â”œâ”€â”€ package.json        # ä¾èµ–é…ç½®
â”œâ”€â”€ tsconfig.json       # TypeScript é…ç½®
â””â”€â”€ vite.config.ts      # Vite é…ç½®
```

## å¼€å§‹ä½¿ç”¨

### ç¯å¢ƒè¦æ±‚

- Node.js >= 16
- npm >= 7

### å®‰è£…ä¾èµ–

```bash
cd web
npm install
```

### å¼€å‘

```bash
npm run dev
```

å¯åŠ¨åè®¿é—® http://localhost:3000

### æ„å»º

```bash
npm run build
```

æ„å»ºäº§ç‰©å°†ç”Ÿæˆåœ¨ `dist` ç›®å½•ã€‚

### é¢„è§ˆæ„å»º

```bash
npm run preview
```

## é…ç½®è¯´æ˜

### API ä»£ç†

å¼€å‘ç¯å¢ƒä¸‹ï¼ŒAPI è¯·æ±‚ä¼šè‡ªåŠ¨ä»£ç†åˆ°åç«¯æœåŠ¡ï¼ˆé»˜è®¤ http://localhost:8080ï¼‰ã€‚

åœ¨ `vite.config.ts` ä¸­é…ç½®ï¼š

```typescript
server: {
  port: 3000,
  proxy: {
    '/api': {
      target: 'http://localhost:8080',
      changeOrigin: true
    }
  }
}
```

### è®¤è¯æœºåˆ¶

ç³»ç»Ÿä½¿ç”¨åŸºäºç­¾åçš„è®¤è¯æ–¹å¼ï¼š

1. ç™»å½•æ—¶æœåŠ¡å™¨è¿”å› `signature`
2. åç»­è¯·æ±‚åœ¨ Header ä¸­æºå¸¦ï¼š
   - `Signature`: ç­¾åå­—ç¬¦ä¸²
   - `Account`: è´¦å·

ç­¾åä¿¡æ¯å­˜å‚¨åœ¨ localStorage ä¸­ï¼Œé¡µé¢åˆ·æ–°åè‡ªåŠ¨æ¢å¤ã€‚

## é¡µé¢è¯´æ˜

### 1. ç™»å½•é¡µ (Login)
- è´¦å·å¯†ç ç™»å½•
- ç™»å½•çŠ¶æ€æŒä¹…åŒ–

### 2. ç…§ç‰‡é¡µ (Photos)
- ç½‘æ ¼å±•ç¤ºç…§ç‰‡
- æ”¯æŒæ”¶è—ã€è§†é¢‘è¿‡æ»¤
- æ ‡ç­¾æœç´¢
- å¤šç§æ’åºæ–¹å¼
- åˆ†é¡µåŠ è½½
- ç…§ç‰‡è¯¦æƒ…æŸ¥çœ‹

### 3. æ—¶é—´çº¿ (Timeline)
- æ ‘å½¢å±•ç¤ºå¹´æœˆç»“æ„
- ç‚¹å‡»æŸ¥çœ‹å¯¹åº”æ—¶é—´æ®µç…§ç‰‡
- æ”¯æŒæ”¶è—è¿‡æ»¤

### 4. åœ°å›¾ (Map)
- åŸºäº Leaflet çš„äº¤äº’å¼åœ°å›¾
- æ ‡è®°æ‰€æœ‰æœ‰ä½ç½®ä¿¡æ¯çš„ç…§ç‰‡
- ç‚¹å‡»æ ‡è®°æŸ¥çœ‹ç…§ç‰‡è¯¦æƒ…

### 5. äººè„¸ (Faces)
- ç½‘æ ¼å±•ç¤ºæ‰€æœ‰äººè„¸
- äººè„¸å‘½åã€éšè—ã€æ”¶è—
- æŸ¥çœ‹äººè„¸å…³è”çš„æ‰€æœ‰ç…§ç‰‡
- æ”¯æŒæœç´¢å’Œè¿‡æ»¤

### 6. æ´»åŠ¨ (Activities)
- è¡¨æ ¼å±•ç¤ºæ‰€æœ‰æ´»åŠ¨
- åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æ´»åŠ¨
- è®¾ç½®æ´»åŠ¨æ—¶é—´èŒƒå›´å’Œä½ç½®

### 7. æ–‡ä»¶å¤¹ (Folders)
- æ ‘å½¢å±•ç¤ºæ–‡ä»¶å¤¹ç»“æ„
- æ‰¹é‡ä¿®æ”¹ç…§ç‰‡æ—¥æœŸ
- æ‰¹é‡ä¿®æ”¹ç…§ç‰‡ä½ç½®
- æ–‡ä»¶å¤¹ç§»è‡³å›æ”¶ç«™

### 8. ä¸Šä¼  (Upload)
- æ‹–æ‹½ä¸Šä¼ 
- æ‰¹é‡ä¸Šä¼ 
- å®æ—¶è¿›åº¦æ˜¾ç¤º
- æ”¯æŒå›¾ç‰‡å’Œè§†é¢‘

### 9. å›æ”¶ç«™ (Trash)
- æŸ¥çœ‹å›æ”¶ç«™ç…§ç‰‡
- æ¢å¤ç…§ç‰‡
- æ¸…ç©ºå›æ”¶ç«™ï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰
- å®æ—¶è¿›åº¦æ˜¾ç¤º

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢

1. åœ¨ `src/views/` åˆ›å»ºé¡µé¢ç»„ä»¶
2. åœ¨ `src/router/index.ts` æ·»åŠ è·¯ç”±
3. åœ¨ `src/layout/MainLayout.vue` æ·»åŠ èœå•é¡¹

### è°ƒç”¨ API

```typescript
import { getPicsApi } from '@/api'

const loadPhotos = async () => {
  const res = await getPicsApi({
    trashed: false,
    start: 0,
    size: 50
  })
  
  if (res.code === 0) {
    // å¤„ç†æ•°æ®
  }
}
```

### çŠ¶æ€ç®¡ç†

ä½¿ç”¨ Pinia è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼š

```typescript
import { useUserStore } from '@/stores/user'

const userStore = useUserStore()
console.log(userStore.user)
```

## å¸¸è§é—®é¢˜

### 1. å›¾ç‰‡åŠ è½½å¤±è´¥

æ£€æŸ¥åç«¯ COS é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿å›¾ç‰‡è·¯å¾„å¯è®¿é—®ã€‚

### 2. ç™»å½•åç«‹å³é€€å‡º

æ£€æŸ¥ç­¾åéªŒè¯é€»è¾‘ï¼Œç¡®ä¿ Header ä¸­æ­£ç¡®æºå¸¦äº†ç­¾åä¿¡æ¯ã€‚

### 3. ä¸Šä¼ å¤±è´¥

æ£€æŸ¥åç«¯ä¸Šä¼ æ¥å£æ˜¯å¦æ­£å¸¸ï¼Œæ–‡ä»¶å¤§å°æ˜¯å¦è¶…é™ã€‚

### 4. åœ°å›¾ä¸æ˜¾ç¤º

ç¡®ä¿ Leaflet CSS æ­£ç¡®å¼•å…¥ï¼Œç½‘ç»œå¯ä»¥è®¿é—® OpenStreetMap ç“¦ç‰‡æœåŠ¡ã€‚

## License

MIT

## ç›¸å…³é“¾æ¥

- [Vue 3](https://vuejs.org/)
- [TDesign](https://tdesign.tencent.com/)
- [Vite](https://vitejs.dev/)
- [Pinia](https://pinia.vuejs.org/)
- [Leaflet](https://leafletjs.com/)
