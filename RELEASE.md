## RELEASE 情况

- 已发布版本 2.8
- 当前开发版本 2.9

## 各版本情况

### v1.0 Jul.13,2021

- [x] 展示照片计数
- [x] 按Meta/Shift 多选照片
- [x] 上下左右键选择照片
- [x] 按Meta/Shift+方向键多选照片
- [x] 图片放到垃圾箱
- [x] 删除图片后更新计数
- [x] 支持批量删除图片
- [x] 双击/回车放大图片
- [x] 图片展示时支持上一张、下一张等操作
- [ ] ~~有provider就没必要用bus了~~
- [x] 图片展示时可以删除
- [x] 当前图片删除后，自动加载下一张
- [x] if it's last one, get prev one.
- [x] 如果所有图片都删除了，退出大图片
- [x] esc 退出大图片
- [x] 导入图片到cos
- [x] 展示回收站按钮，并支持切换
- [x] 展示每次导入的左边树
- [x] 左边日期树数量按是否删除过滤
- [x] 左边日期树选中后过滤图片
- [x] 左边目录树选中后过滤图片
- [x] 目录树层级貌似还不太对，需要优化
- [x] 选中的颜色没有变化，这个问题留待解决
- [x] 导入时，有相同图片不要直接抛弃，而是建立关联
- [x] 图片默认按id倒序展示
- [x] 可以选择图片排序的方式
- [x] 支持清空回收站
- [x] 导入完成后刷新页面
- [x] 左侧树支持"全部"
- [x] 支持放大/缩小图片
- [x] 支持在放大的情况下用 HJKL 来移动图片
- [x] 详情时展示图片信息
- [x] 列表时展示图片信息
- [x] 物理删除图片时，相关的File都要一起删除
- [x] Progress 可以做成统一的
- [x] 尝试一下使用浏览器上传文件夹的功能
- [x] 上传到cos的，要支持按目录结构上传
- [x] 上传到cos时，过滤非照片和视频的文件
- [x] 上传到cos之后，刷数据库
- [x] 上传的时候要控制一下，避免重复创建
- [x] 上传完成后要刷新当前页面的内容
- [x] 身份认证之后才能访问

### v1.1 Jul.14,2021

- [x] 支持视频上传
- [x] 支持视频展示
- [x] 部署脚本和文档
- [x] 日志输出到文件
- [x] 视频直接用万象API来截图，不需要配置cos上的流程，也不需要循环等待
- [x] 记录视频时长
- [x] cos上传出错之后，上报到后台并记录
- [x] tile中的视频加上一个视频的标记
- [x] tile中的视频加上一个视频的时长
- [x] bug: 如果takenDate是null，那么就用当天的日期
- [x] bug: cos 版本和 万象版本不一致导致video不正常
- [x] bug: tile会复用，要删掉不必要的视频标签
- [x] 视频进度条
- [x] 上传到cos增加progress dialog

### v1.2 Aug.11,2021

- [x] 重构代码，删除不必要的代码
- [x] 支持删除某个目录下的所有照片
- [x] 年份后面也展示照片数
- [x] 文件目录后面也展示照片数
- [x] 按目录展示，子目录下的照片也展示出来
- [x] 照片排序也要按新的datasource来支持
- [x] 支持修改图片的日期
- [x] 支持拷贝图片的gis信息
- [x] 支持修改图片的gis信息
- [x] 图片gis信息被修改之后，要重新调用一下address接口
- [x] 支持按目录修改图片的日期
- [x] 支持按目录修改图片的gis信息
- [x] 支持照片的旋转
- [x] 全屏状态下也支持旋转
- [x] bug: mediaType error
- [x] 增加rotate按钮
- [x] 视频也支持rotate
- [x] 切换trash之后左边树没有重新加载
- [x] 不支持上传 heic 格式图片，主要是ImageIO不支持
- [x] 直接从cos读取图片的基本信息和exif信息
- [x] 历史数据的exif数据不对，要重新刷一遍
- [x] 所有照片缩放成一个可以快速下载的大小，另外保存一份
- [x] 打包成jar，运行更方便
- [x] Dart 的Blob()产生的Blob对象，感觉会将二进制list进行base64，从而导致heic2any
  无法识别对应的内容，所以直接用HttpRequest来读取到Blob就可以了，没必要用Dio
- [x] 删除好像有点问题，优先解决

### v1.3 Aug.15,2021

- [x] 上传文件的时候，左侧的提醒消退的太慢了
- [x] 支持修改描述信息
- [x] 加上star标记
- [x] 可以只查看star的照片
- [x] 左边的树也可以跟着 只看star变化
- [x] 重构，去掉不必要的静态变量
- [x] 可以移动文件夹到另一个文件夹下
- [x] 可以合并照片到另一个文件夹下
- [x] 还是切换成springboot吧，nutzboot 还是有点小众
- [x] prefetch 下面几张图片
- [x] 提供原图下载的能力
- [x] tooltip 一开始就显示出来遮住了照片，应该鼠标移上去才出来
- [x] 时间有个时差的问题
- [ ] ~~还要再查一遍拿到了gps信息但是没获取地址的~~
- [ ] ~~日期的月份，有些带0有些不带0（这是目录的问题）~~
- [x] 使用github的Actions来构建
- [x] 支持 docker 启动
- [x] bug: 条件切换之后，select要清空
- [x] 上传的时候应该把文件名放入到 description里面
- [x] 上传的时候，文件时间也可以当作备用时间写入

### v1.4 Aug.28,2021

- [x] 数据库密码去掉
- [x] 增加 rotate快捷键
- [x] bug: 全屏状态下旋转后，顺序变了
- [x] 将快捷键统一管理起来
- [x] 开发环境下不需要密码
- [x] 记住上一次看图片的位置
- [x] 打开页面自动跳转到上次图片位置
- [x] 跳转到对应的图片位置
- [x] 滚动到对应的图片
- [x] 如果未翻页，则翻页过去之后在滚动到对应图片
- [x] thumb 可以根据rotate来进生成
- [x] bug: thumb 有缓存，需要刷新
- [x] bug: 有条件的时候更新图片会导致从当前结果列表里面消失
- [x] 上下移动时会跳行
- [x] rotate 之后放大宽高比不对
- [x] 如果当前选中图片在可视范围内就不用滚动了
- [x] bug: 输入框无法跳出的问题

### v1.5 Sep.13,2021

- [x] 将当前照片拷贝到剪贴板（目前只能拷贝url）
- [x] bug: 修改照片日期或旋转之后，会产生大量重新拉取数据的行为
- [x] 可以根据浏览器大小变化而调整每行的图片数
- [x] 跳转到照片所在图片的文件夹
- [x] 属于多个文件夹，则让用户选择
- [x] 可以增加tag，给照片打tag
- [x] 可以按tag 进行过滤

### v1.6 Sep.22,2021

- [ ] ~~有些图片的旋转方向，缩略图和大图不一致，需要看下腾讯云cos是否有配置项 （这里很麻烦，浏览器会根据exif来自动旋转，手工设置旋转度数之后，有时候就会混乱，需要想个办法解决掉）~~
- [x] 如果某个目录下所有照片都没了（包括回收站），把目录也删了
- [x] 自动调整照片的方向
- [x] 研究一下部署模式，如何方便的设置各类参数
- [x] 合并目录时，同名子目录也要合并
- [x] 图片详情右侧弄一个属性编辑器
- [x] BUG: 滚动之后，select的内容丢失了
- [x] 日期选择器初始值是选中的照片时间
- [x] 日期选择器应该可以直接录入日期
- [x] 支持meta deselect的功能
- [x] bug: 修改日期后，esc无法回到上一页
- [x] bug: 有时候多选会失败，应该是focus丢失造成的
- [x] bug: 图片详情的宽度不对
- [x] 日期格式保持一致
- [x] 点击图片能获得焦点
- [x] 支持地图

### v1.7

- [x] 可以只查看视频
- [x] 支持按文件大小排序
- [x] 支持按文件高宽排序
- [x] bug: 图片选中后应该自动获取焦点
- [x] tooltip 延迟半秒出现
- [x] bug: 多次清空回收站会有问题
- [x] 支持https域名
- [x] bug: tags 是空的时候加载header菜单有问题

### v1.8
- [x] 代理并缓存 cos 上的资源，从而达到私有读写的能力，以及http2的能力
- [ ] 各种图片缩放和视频转码，也通过 api 而不是定义工作流来完成
- [ ] 可以使用默认配置的 cos 桶，无需额外配置
- [ ] bug: 照片加载异常是，页面应该能响应
- [ ] 用更复杂的用户名/密码来登陆
- [x] 使用cookie来记录当前登陆的用户名
- [ ] 记录文件的上传人
- [ ] 加上删除/修改时间/修改gis的日志
- [ ] 可以undo 删除/修改时间/修改gis 的操作

### v2.0 Dec.10,2023
- [x] 使用vue3重写页面
- [x] 展示照片计数
- [x] 按Meta/Shift 多选照片
- [x] 上下左右键选择照片
- [x] 按Meta/Shift+方向键多选照片
- [x] 跳转到指定位置
- [x] 图片放到垃圾箱
- [x] 删除图片后更新计数
- [x] 支持批量删除图片
- [x] 双击/回车放大图片
- [x] 图片展示时支持上一张、下一张等操作
- [x] 图片展示时可以删除
- [x] 当前图片删除后，自动加载下一张
- [x] if it's last one, get prev one.
- [x] 如果所有图片都删除了，退出大图片
- [x] esc 退出大图片
- [x] 导入图片到cos
- [x] 导入的进度条
- [x] 展示回收站按钮，并支持切换
- [x] 左边日期树数量按是否删除过滤
- [x] 左边日期树选中后过滤图片
- [x] 左边目录树选中后过滤图片
- [x] 导入时，有相同图片不要直接抛弃，而是建立关联
- [x] 图片默认按id倒序展示
- [x] 可以选择图片排序的方式
- [x] 支持清空回收站
- [x] 导入完成后刷新页面
- [x] 左侧树支持"全部"
- [x] 支持放大/缩小图片
- [x] 详情时展示图片信息
- [x] 列表时展示图片信息
- [x] 尝试一下使用浏览器上传文件夹的功能
- [x] 上传到cos的，要支持按目录结构上传
- [x] 上传到cos时，过滤非照片和视频的文件
- [x] 上传到cos之后，刷数据库
- [x] 上传的时候要控制一下，避免重复创建
- [x] 上传完成后要刷新当前页面的内容
- [x] 身份认证之后才能访问 


### v2.1 Dec.12,2023

- [x] 支持视频上传
- [x] 支持视频展示
- [x] 部署脚本和文档
- [x] 日志输出到文件
- [x] 视频直接用万象API来截图，不需要配置cos上的流程，也不需要循环等待
- [x] 记录视频时长
- [x] cos上传出错之后，上报到后台并记录
- [x] tile中的视频加上一个视频的标记
- [x] tile中的视频加上一个视频的时长
- [x] bug: 如果takenDate是null，那么就用当天的日期
- [x] bug: cos 版本和 万象版本不一致导致video不正常
- [x] bug: tile会复用，要删掉不必要的视频标签
- [x] 视频进度条
- [x] 上传到cos增加progress dialog
- [x] 关闭详情时暂停播放视频

### v2.2 Jan.01,2024

- [x] 支持删除某个目录下的所有照片
- [x] 年份后面也展示照片数
- [x] 文件目录后面也展示照片数
- [x] 按目录展示，子目录下的照片也展示出来
- [x] 支持修改图片的日期
- [x] 支持拷贝图片的gis信息——本功能挪到详情页里面去
- [x] 支持修改图片的gis信息
- [x] 支持按目录修改图片的日期
- [x] 支持按目录修改图片的gis信息
- [x] 支持照片的旋转
- [x] 全屏状态下也支持旋转
- [x] 增加rotate按钮
- [ ] ~~视频也支持rotate~~
- [x] 支持并发上传图片
- [x] 右键也能像左键一样，先选中当前图片
- [x] 右键也能像左键一样，先选中当前目录

### v2.3 Jan.02.2024

- [x] 支持修改描述信息
- [x] 加上star标记
- [x] 可以只查看star的照片
- [x] 左边的树也可以跟着 只看star变化
- [x] 可以移动文件夹到另一个文件夹下
- [x] 可以合并照片到另一个文件夹下
- [x] 提供原图下载的能力
- [x] 禁用 cos 的目录能力

### v2.4 Jan.02.2024

- [x] 数据库密码去掉
- [x] 增加 rotate快捷键
- [x] 将快捷键统一管理起来
- [x] 记住上一次看图片的位置
- [x] 打开页面自动跳转到上次图片位置
- [x] 滚动到对应的图片
- [x] thumb 可以根据rotate来进生成

### v2.5 Jan.07,2024 

- [x] 将当前照片拷贝到剪贴板
- [x] 可以根据浏览器大小变化而调整每行的图片数
- [x] 可以增加tag，给照片打tag
- [x] 可以按tag 进行过滤

### v2.6 Jan.14,2024

- [x] 自动调整照片的方向
- [x] 图片详情右侧弄一个属性编辑器
- [x] 日期选择器初始值是选中的照片时间
- [x] 日期选择器应该可以直接录入日期
- [x] 支持meta deselect的功能
- [x] 支持地图

### v2.7 Jan.14,2024

- [x] 可以只查看视频
- [x] 支持按文件大小排序
- [x] 支持按文件高宽排序
- [x] 支持https域名

### v2.8 Jan.27,2024
- [x] 代理并缓存 cos 上的资源，从而达到私有读写的能力，以及http2的能力
- [x] 各种图片缩放和视频转码，也通过 api 而不是定义工作流来完成
- [x] 可以使用默认配置的 cos 桶，无需额外配置
- [x] 使用cookie来记录当前登陆的用户名
- [x] 人脸的识别和相同人脸归类
- [x] 展示人脸列表
- [x] 根据人脸筛选对应的照片
- [x] 选择默认人脸
- [x] 合并人脸
- [x] 头像周边多放宽一些

### v2.9
- [x] 头像加心
- [x] 隐藏头像
- [x] 支持查看隐藏头像，并切换是否隐藏
- [x] 已删除的照片，也要清理掉 photo face info
- [ ] 圈人：展示当前照片的人脸及名字等
- [ ] 复制当前照片的时间和 gis 信息————使用 local storage
- [ ] 应用已复制的时间和 gis 信息
- [ ] 用更复杂的用户名/密码来登陆
- [ ] 没有登录的情况下，禁止访问 api
- [ ] 记录文件的上传人
- [ ] 加上删除/修改时间/修改gis的日志
- [ ] 可以undo 删除/修改时间/修改gis 的操作
- [ ] get photo ids 的优化

## 需求池

- [ ] 跳转到照片所在图片的文件夹
- [ ] 属于多个文件夹，则让用户选择
- [ ] cos 可扩展，可以使用其他云的 cos
- [ ] 相似图片的查找和展示
- [ ] 清空回收站的权限只能管理员做
- [ ] 如果引入用户概念的话，star是否应该是按个人来的？...好像更复杂了
- [ ] 支持往年今日
- [ ] 可以支持按导入的目录来进行授权让其他人看
- [ ] 手机上upload可以选择文件，要考虑如何兼容
- [ ] 应该有办法获取到video的拍摄时间吧
- [ ] header bar 可以滚动或者自动隐藏
- [ ] 移动端更友好：可以左右划来看上一张/下一张照片
- [ ] 移动端更友好：可以隐藏左侧和上侧菜单
- [ ] 移动端更友好：照片可全屏查看

## 更长远计划

